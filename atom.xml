<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸€é¢—å°åœŸè±†</title>
  
  <subtitle>ä¸€é¢—å°åœŸè±†</subtitle>
  <link href="https://bigfish777.github.io/stars.github.io/atom.xml" rel="self"/>
  
  <link href="https://bigfish777.github.io/stars.github.io/"/>
  <updated>2021-05-28T17:04:05.608Z</updated>
  <id>https://bigfish777.github.io/stars.github.io/</id>
  
  <author>
    <name>ä¸€é¢—å°åœŸè±†</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://bigfish777.github.io/stars.github.io/2021/05/29/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AF%87-%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F1/"/>
    <id>https://bigfish777.github.io/stars.github.io/2021/05/29/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AF%87-%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F1/</id>
    <published>2021-05-28T17:04:05.608Z</published>
    <updated>2021-05-28T17:04:05.608Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="title-æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœºç¯‡-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ"><a href="#title-æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœºç¯‡-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ" class="headerlink" title="title:æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœºç¯‡-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ"></a>title:æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœºç¯‡-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ</h2><h2 id="ä¸€ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ-JVMå†…å­˜æ¨¡å‹"><a href="#ä¸€ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ-JVMå†…å­˜æ¨¡å‹" class="headerlink" title="ä¸€ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ(JVMå†…å­˜æ¨¡å‹)"></a>ä¸€ã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ(JVMå†…å­˜æ¨¡å‹)</h2><p>â€‹    åœ¨Javaè™šæ‹Ÿæœºä¸­æ‰§è¡ŒJavaç¨‹åºçš„è¿‡ç¨‹éƒ½ä¼šæŠŠä»–æ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸå„æœ‰å„è‡ªçš„ç”¨é€”ï¼Œæœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºçš„è¿›ç¨‹çš„å¯åŠ¨è€Œä¸€ç›´å­˜åœ¨ï¼Œæœ‰çš„åŒºåŸŸåˆ™æ˜¯éšç€ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨è€Œå¯åŠ¨ï¼Œç»“æŸè€Œé”€æ¯ã€‚è¿™äº›åŒºåŸŸæ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šå…±åŒç»„æˆäº†è¿è¡Œæ—¶åŒºåŸŸã€‚ä¹Ÿå°±æ˜¯JVMçš„å†…å­˜æ¨¡å‹çš„ç»„æˆã€‚</p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxNy85LzQvZGQzYjE1YjNkODgyNmZhZWFlMjA2Mzk3NmZiOTkyMTM_aW1hZ2VWaWV3Mi8wL3cvMTI4MC9oLzk2MC9mb3JtYXQvd2VicC9pZ25vcmUtZXJyb3IvMQ" alt="img" style="zoom: 67%;" /><h3 id="1-1-ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram-Counter-Registerï¼‰"><a href="#1-1-ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram-Counter-Registerï¼‰" class="headerlink" title="1.1 ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰"></a>1.1 ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰</h3><h5 id="1-1-1-ç¨‹åºè®¡æ•°å™¨æ˜¯ä»€ä¹ˆï¼ŸğŸ§åˆèƒ½å¹²ä»€ä¹ˆï¼Ÿ"><a href="#1-1-1-ç¨‹åºè®¡æ•°å™¨æ˜¯ä»€ä¹ˆï¼ŸğŸ§åˆèƒ½å¹²ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.1.1 ç¨‹åºè®¡æ•°å™¨æ˜¯ä»€ä¹ˆï¼ŸğŸ§åˆèƒ½å¹²ä»€ä¹ˆï¼Ÿ"></a>1.1.1 ç¨‹åºè®¡æ•°å™¨æ˜¯ä»€ä¹ˆï¼ŸğŸ§åˆèƒ½å¹²ä»€ä¹ˆï¼Ÿ</h5><p>â€‹    <strong>ç¨‹åºè®¡æ•°å™¨ç®€å•çš„ç†è§£ï¼Œä»–æ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç è¡Œå·æŒ‡ç¤ºå™¨ã€‚é€šè¿‡å®ƒå¯ä»¥çŸ¥é“ä¸‹ä¸€æ¡è¦æ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤ã€‚</strong>ä»–æ˜¯ç¨‹åºæ§åˆ¶æµçš„æŒ‡ç¤ºå™¨ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½éœ€è¦ä¾èµ–å®ƒæ¥å®Œæˆã€‚</p><p>â€‹    <strong>æ³¨æ„ï¼š</strong>ç”±äºJavaè™šæ‹Ÿæœºä¸­çš„å¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢æ¥åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»»ä½•ä¸€ä¸ªæ—¶åˆ»ï¼Œå¤„ç†å™¨éƒ½åªä¼šå¤„ç†ä¸€æ¡çº¿ç¨‹ä¸­çš„æŒ‡ä»¤ï¼Œå¹¶ä¸”çš„è¯å¤„ç†å™¨ä¸æ•¢ä¿è¯æ¯ä¸ªçº¿ç¨‹çš„ç¨‹åºéƒ½ä¼šæ‰§è¡Œå®Œæˆï¼Œä¹Ÿå°±æ˜¯è¯´å½“çº¿ç¨‹ä¸€æ‰§è¡Œä¸€åŠåˆ‡æ¢åˆ°çº¿ç¨‹äºŒæ—¶ï¼Œå¦‚æœæ²¡æœ‰ç¨‹åºè®¡æ•°å™¨è®°å½•å½“å‰çº¿ç¨‹ä¸­æŒ‡ä»¤æ‰§è¡Œçš„ä½ç½®ï¼Œé‚£å°±ä¼šå¯¼è‡´æ¯æ¬¡çº¿ç¨‹å†æ¬¡è¢«å¤„ç†å™¨æ‰§è¡Œæ—¶ï¼Œå°±ä¼šä»å¤´å†æ¥ã€‚<strong>å› æ­¤ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®æ¯æ¡çº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªè‡ªå·±ç‹¬æœ‰çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´çš„ç¨‹åºè®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å‚¨å­˜ã€‚æ‰€ä»¥æˆ‘ä»¬ç§°è¿™ä¸€ç±»çš„å†…å­˜åŒºåŸŸä¸ºâ€<code>çº¿ç¨‹ç§æœ‰</code>â€œ.</strong></p><h3 id="1-2-JAVAè™šæ‹Ÿæœºæ ˆï¼ˆJava-Virtual-Machine-Stackï¼‰"><a href="#1-2-JAVAè™šæ‹Ÿæœºæ ˆï¼ˆJava-Virtual-Machine-Stackï¼‰" class="headerlink" title="1.2 JAVAè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰"></a>1.2 JAVAè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰</h3><p>â€‹    javaè™šæ‹Ÿæœºæ ˆæ˜¯<strong>çº¿ç¨‹ç§æœ‰çš„</strong>ï¼Œä»–çš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ª<strong>æ ˆå¸§</strong>ï¼ˆStack Frameï¼‰ç”¨äºå‚¨å­˜<code>å±€éƒ¨å˜é‡è¡¨</code>ã€<code>æ“ä½œæ•°æ ˆ</code>ã€<code>åŠ¨æ€é“¾æ¥</code>ã€<code>æ–¹æ³•å‡ºå£</code>ç­‰ä¿¡æ¯ã€‚æ¯ä¸ªæ–¹æ³•çš„è°ƒç”¨åˆ°æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p><h5 id="1-2-1-å±€éƒ¨å˜é‡è¡¨"><a href="#1-2-1-å±€éƒ¨å˜é‡è¡¨" class="headerlink" title="1.2.1 å±€éƒ¨å˜é‡è¡¨"></a>1.2.1 å±€éƒ¨å˜é‡è¡¨</h5><p>â€‹    å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸä½•ç§Javaè™šæ‹ŸæœºåŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨ï¼ˆå¼•ç”¨æŒ‡é’ˆã€å¥æŸ„æˆ–è€…äºæ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰å’ŒreturnAddressã€‚</p><p>â€‹    è¿™äº›æ•°æ®åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­éƒ½ä»¥<strong>å±€éƒ¨å˜é‡æ§½ï¼ˆSlotï¼‰</strong>æ¥è¡¨ç¤ºï¼Œå…¶ä¸­64ä½çš„é•¿åº¦çš„longå’Œdoubleç±»å‹çš„æ•°æ®ä¼šå ä¸¤ä¸ªå˜é‡æ§½ï¼Œå…¶ä½™çš„åªä¼šå ä¸€ä¸ªã€‚</p><h5 id="1-2-2-å¼‚å¸¸"><a href="#1-2-2-å¼‚å¸¸" class="headerlink" title="1.2.2 å¼‚å¸¸"></a>1.2.2 å¼‚å¸¸</h5><p>åœ¨ã€ŠJava<strong>è™šæ‹Ÿæœºè§„èŒƒä¸­</strong>ã€‹ä¸­ï¼Œè™šæ‹Ÿæœºæ ˆè§„å®šäº†ä¸¤ç±»çš„å¼‚å¸¸çŠ¶å†µï¼š</p><p><strong>StackOverflowErrorï¼š</strong>å½“çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºäº†è™šæ‹Ÿæœºæ‰€å…è®¸çš„æ ˆæ·±åº¦å°±ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ StackOverflowErrorï¼ˆå †æ ˆæº¢å‡ºé”™è¯¯ï¼‰</p><p><strong>demo:</strong> </p><pre><code class="java">    private static int stackLength;    public static void stackLeak()&#123;        stackLength++;        stackLeak();    &#125;    /**     * æœ€å¤§å †å¤§å°: -Xmx5M     */    public static void main(String[] args) &#123;        try &#123;            stackLeak();        &#125;catch (Throwable e)&#123;            e.printStackTrace();            System.out.println(&quot;stack length: &quot;+ stackLength);        &#125;    &#125;    // è™šæ‹Ÿæœºæ ˆæ·±åº¦ä¸ºï¼š23812  æŠ›å‡ºStackOverFlowErrorå¼‚å¸¸    // Exception in thread &quot;main&quot; java.lang.StackOverflowError    // stack length: 23812</code></pre><p>åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºä»–æ˜¯ä¸€æ®µç®€å•çš„é€’å½’è°ƒç”¨ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æŒ‡å®šç»“æŸæ¡ä»¶ã€‚å°±å¯¼è‡´äº†æˆäº†ä¸€ä¸ªæ­»å¾ªç¯ï¼Œè¿™æ—¶æˆ‘ä»¬åœ¨ä¸‹å›¾ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼Œä»–ä¼šä¸æ–­çš„è¿›è¡Œå…¥æ ˆï¼Œç›´åˆ°æ ˆæ·±åº¦å¤§äºäº†è™šæ‹Ÿæœºé™åˆ¶çš„æ·±åº¦ï¼ŒæŠ›å‡ºäº† <code>java.lang.StackOverflowError</code></p><img src="C:\Users\24267\AppData\Roaming\Typora\typora-user-images\image-20210528223846222.png" alt="image-20210528223846222" style="zoom: 150%;" /><p><strong>OutOfMemoryError:</strong> å½“æ ˆæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜æ—¶å°±ä¼šæŠ›å‡ºOutOfMemoryErrorã€‚ä½†æ˜¯åœ¨HotSpot ä¸­è™šæ‹Ÿæœºæ ˆå®¹é‡æ˜¯ä¸å¯ä»¥çš„åŠ¨æ€æ‰©å±•çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šå‡ºç°<code>OOM</code>, ä½†å…¶å®ä¸ç„¶ï¼Œå¦‚æœç”³è¯·æ—¶å°±å¤±è´¥ï¼Œä»ç„¶ä¼šå‡ºç°<code>OOM</code>å¼‚å¸¸ã€‚</p><h3 id="1-3-æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stackï¼‰"><a href="#1-3-æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stackï¼‰" class="headerlink" title="1.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰"></a>1.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰</h3><p>æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä¸ºäº†è™šæ‹Ÿæœºæ ˆä½¿ç”¨çš„ã€‚</p><h3 id="1-4-Java-å †ï¼ˆHeapï¼‰"><a href="#1-4-Java-å †ï¼ˆHeapï¼‰" class="headerlink" title="1.4 Java å †ï¼ˆHeapï¼‰"></a>1.4 Java å †ï¼ˆHeapï¼‰</h3><p>â€‹    Javaå †æ˜¯çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºåˆ›å»ºæ—¶åˆ›å»ºï¼Œæ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å®ä¾‹å¯¹è±¡ï¼Œåœ¨ã€ŠJAVAè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­é˜Ÿjava å †æè¿°æ˜¯ï¼šâ€The heap is the runtime data area from which memory for all class instances and arrays is allocatedï¼ˆæ‰€æœ‰çš„Javaå¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„åœ¨å †ä¸Šåˆ†é…ï¼‰â€œã€‚è¿™ä¸ª<code>å‡ ä¹</code>å°±å¾ˆæœ‰æ·±åº¦ã€‚éšç€Javaè¯­è¨€çš„å‘å±•ï¼Œç°åœ¨å¯ä»¥çœ‹åˆ°æœªæ¥å¯èƒ½ä¼šå‡ºç°å€¼ç±»å‹çš„æ”¯æŒï¼Œç”±äºå³æ—¶ç¼–è¯‘çš„æŠ€æœ¯è¿›æ­¥ï¼Œåƒé€ƒé€¸åˆ†æã€æ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ä¼˜åŒ–æ‰‹æ®µï¼ŒJavaå¯¹è±¡å®ä¾‹åˆ†é…åœ¨å †å·²ç»ä¸åœ¨å‘¢ä¹ˆç»å¯¹äº†ã€‚</p><p>Javaæ˜¯åƒåœ¾å›æ”¶ç®¡ç†çš„å†…å­˜åŒºåŸŸï¼Œå› æ­¤ä¹Ÿç§°ä½œâ€GCå †â€ï¼Œç°åœ¨åƒåœ¾æ”¶é›†å™¨å¤§éƒ¨åˆ†éƒ½æ˜¯åŸºäºåˆ†ä»£æ”¶é›†ç†è®ºè®¾è®¡çš„ï¼Œå› æ­¤ç»å¸¸ä¼šå‡ºç° â€æ–°ç”Ÿä»£â€œã€â€è€å¹´ä»£â€œã€â€Eden ç©ºé—´â€œã€â€From Survivor ç©ºé—´â€œã€â€To Survivor ç©ºé—´â€œç­‰åè¯ã€‚ åœ¨åå‡ å¹´å‰ï¼Œ HotSpotè™šæ‹Ÿæœºå†…éƒ¨çš„åƒåœ¾å›æ”¶å†…å­˜å™¨æ˜¯å…¨éƒ¨ <code>ç»å…¸åˆ†ä»£</code>æ¥è®¾è®¡çš„ï¼šæ–°ç”Ÿä»£ã€è€å¹´ä»£æ”¶é›†å™¨æ­é…å·¥ä½œã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹è¿™äº›è¯´å‘è¿˜æ˜¯èƒ½ä¸ä¼šäº§ç”Ÿå¤ªå¤šçš„æ­§ä¹‰çš„ã€‚ä½†æ˜¯åˆ°äº†å¦‚ä»Šçš„ä»Šå¤©ï¼Œåƒåœ¾æ”¶é›†å™¨æŠ€æœ¯ä¸åå‡ å¹´å‰æ—©å·²ä¸åŒï¼ŒHotSpoté‡Œé¢ä¹Ÿå‡ºç°äº†éåˆ†ä»£è®¾è®¡çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p><p>ä¸‹å›¾ä¸ºåˆ†ä»£è®¾è®¡çš„åƒåœ¾æ”¶é›†å™¨å†…å­˜æ¨¡å‹ï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxNy85LzQvOTcxMDE4MDMxNWQzNTc1NmI2OGU5YzVkYWY0NGQ2ZTU_aW1hZ2VWaWV3Mi8wL3cvMTI4MC9oLzk2MC9mb3JtYXQvd2VicC9pZ25vcmUtZXJyb3IvMQ" alt="img"></p><h5 id="1-3-2-å¼‚å¸¸"><a href="#1-3-2-å¼‚å¸¸" class="headerlink" title="1.3.2 å¼‚å¸¸"></a>1.3.2 å¼‚å¸¸</h5><p>â€‹    å½“Javaå †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®åŠ›åˆ†é…ï¼Œå¹¶ä¸”æ— æ³•æ‰©å±•æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠ›å‡º <code>OutOfMemoryError</code>å¼‚å¸¸ã€‚ </p><p><strong>demo:</strong></p><pre><code class="java">/**   * -Xmx2M  * Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space  *     at com.xphu.DemoTest.main(DemoTest.java:5)  */public static void main(String[] args) &#123;    byte[] bytes = new byte[1024 * 1024 * 1024];    System.out.println(bytes.length);&#125;    </code></pre><p><img src="C:\Users\24267\AppData\Roaming\Typora\typora-user-images\image-20210529002804273.png" alt="image-20210529002804273"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h2 id=&quot;title-æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœºç¯‡-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ&quot;&gt;&lt;a href=&quot;#title-æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœºç¯‡-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ&quot; class=&quot;headerlink&quot; title=&quot;title:æ·±å…¥æµ…å‡ºJavaè™šæ‹Ÿæœºç¯‡-è¿è¡Œæ—¶çš„æ•°æ®åŒºåŸŸ&quot;&gt;&lt;/a&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>mybatisæºç åˆ†æ--mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ</title>
    <link href="https://bigfish777.github.io/stars.github.io/2021/05/27/mybatis%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-mybatis%E9%85%8D%E7%BD%AE%E9%98%B6%E6%AE%B5%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/"/>
    <id>https://bigfish777.github.io/stars.github.io/2021/05/27/mybatis%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-mybatis%E9%85%8D%E7%BD%AE%E9%98%B6%E6%AE%B5%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/</id>
    <published>2021-05-27T10:33:18.499Z</published>
    <updated>2021-05-27T10:33:18.499Z</updated>
    
    <content type="html"><![CDATA[<h2 id="mybatisæºç åˆ†æ-mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ"><a href="#mybatisæºç åˆ†æ-mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ" class="headerlink" title="mybatisæºç åˆ†æ-mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ"></a>mybatisæºç åˆ†æ-mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ</h2><p>çœ‹æºç åˆ°åº•æ€ä¹ˆå»çœ‹ï¼Œæˆ‘æ€»ç»“çš„æ˜¯è¦æœ‰ç›®çš„çš„å»çœ‹æºç ã€‚ä¾‹å¦‚mybatis,æˆ‘ä»¬åœ¨githubæ‹‰ä¸‹æ¥æºç åå‘ç°ä¸€å †ä»£ç ï¼Œæ²¡å¤´æ²¡å°¾æ— ä»ä¸‹æ‰‹ã€‚<br>ä½†æ˜¯å¦‚æœæˆ‘ä»¬å…ˆå†™ä¸€ä¸ªDemo,æ¥åˆ†æè¿™ä¸ªdemoçš„æ¯ä¸€æ­¥åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Œå°±å¥½åˆ†æäº†ã€‚<br>è¿™ä¹Ÿå°±æ˜¯ä¸ºå•¥å­¦ä¹ ä¸€é—¨æ–°æŠ€æœ¯éƒ½éœ€è¦å…ˆå­¦ä¹ æ€ä¹ˆä½¿ç”¨ã€‚</p><h5 id="åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œå¼•å…¥mybatisçš„ä¾èµ–"><a href="#åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œå¼•å…¥mybatisçš„ä¾èµ–" class="headerlink" title="åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œå¼•å…¥mybatisçš„ä¾èµ–"></a>åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œå¼•å…¥mybatisçš„ä¾èµ–</h5><pre><code class="xml">&lt;dependency&gt;    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;    &lt;version&gt;3.4.6&lt;/version&gt;&lt;/dependency&gt;</code></pre><h5 id="é¡¹ç›®ç›®å½•ç»“æ„"><a href="#é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="é¡¹ç›®ç›®å½•ç»“æ„"></a>é¡¹ç›®ç›®å½•ç»“æ„</h5><p><img src="C:\Users\24267\AppData\Roaming\Typora\typora-user-images\image-20210311132924065.png" alt="image-20210311132924065"></p><h5 id="åˆ›å»ºä¸€ä¸ªå®ä½“ç±»å’Œå¯¹åº”çš„mapperæ¥å£"><a href="#åˆ›å»ºä¸€ä¸ªå®ä½“ç±»å’Œå¯¹åº”çš„mapperæ¥å£" class="headerlink" title="åˆ›å»ºä¸€ä¸ªå®ä½“ç±»å’Œå¯¹åº”çš„mapperæ¥å£"></a>åˆ›å»ºä¸€ä¸ªå®ä½“ç±»å’Œå¯¹åº”çš„mapperæ¥å£</h5><pre><code class="java">/** å®ä½“ç±» */public class File &#123;    private Integer id;    private Integer parentId;    private String name;    private Integer isFolder;    .... çœç•¥get/set&#125;/** mapperæ¥å£ */public interface FileMapper &#123;    List&lt;File&gt; selectList();&#125;</code></pre><h5 id="mapper-xml"><a href="#mapper-xml" class="headerlink" title="mapper.xml"></a>mapper.xml</h5><p>ä¸€æ®µå¾ˆç®€å•çš„sqlè¯­å¥ï¼Œå°±æ˜¯æŸ¥è¯¢å…¨éƒ¨çš„fileæ–‡ä»¶ï¼Œæˆ‘å·²ç»æå‰åœ¨æ•°æ®åº“ä¸­æ’å…¥äº†å‡ æ¡æ•°æ®ã€‚æ•°æ®åº“å°±ä¸å±•ç¤ºäº†ï¼Œå¾ˆç®€å•å°±è¿™å‡ ä¸ªå­—æ®µã€‚</p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;org.mybatis.internal.example.mapper.FileMapper&quot;&gt;    &lt;select id=&quot;selectList&quot; resultType=&quot;org.mybatis.internal.example.pojo.File&quot;&gt;        select id,parent_id parentId, name, is_folder isFolder from file;    &lt;/select&gt;&lt;/mapper&gt;</code></pre><h5 id="åœ¨resourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªmyabtis-config-xmlå…¨å±€é…ç½®æ–‡ä»¶"><a href="#åœ¨resourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªmyabtis-config-xmlå…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="åœ¨resourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªmyabtis-config.xmlå…¨å±€é…ç½®æ–‡ä»¶"></a>åœ¨resourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª<code>myabtis-config.xml</code>å…¨å±€é…ç½®æ–‡ä»¶</h5><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt;    &lt;properties&gt;        &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true&quot;/&gt;        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;        &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;    &lt;/properties&gt;    &lt;!--    é…ç½®åˆ«å å¯ä»¥åœ¨mapper.xmlä¸­ ä½¿ç”¨ç®€ç§°å°±å¯ä»¥ä¸ç”¨ä½¿ç”¨ç¾¤å…¨åäº†--&gt;    &lt;typeAliases&gt;&lt;!--        æŒ‡å®šç±»è®¾ç½®åˆ«å--&gt;&lt;!--        &lt;typeAlias alias=&quot;user&quot; type=&quot;org.mybatis.internal.example.pojo.User&quot;/&gt;--&gt;&lt;!--        &lt;typeAlias alias=&quot;str&quot; type=&quot;java.lang.String&quot;/&gt;--&gt;&lt;!--        åŒ…æ‰«é¢å¼çš„æ·»åŠ ç±»åˆ«åï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å˜ä¸ºå°å†™ å¦‚æœä¸ªåˆ«çš„ç±»éœ€è¦æŒ‡å®šåˆ«åå¯ä»¥ä½¿ç”¨ @Alias(&quot;us&quot;) æ·»åŠ åœ¨å®ä½“ç±»ä¸Š--&gt;        &lt;package name=&quot;org.mybatis.internal.example.pojo&quot;/&gt;    &lt;/typeAliases&gt;&lt;!--    å¤šæ•°æ®æº--&gt;    &lt;environments default=&quot;development2&quot;&gt;        &lt;environment id=&quot;development&quot;&gt;            &lt;transactionManager type=&quot;JDBC&quot;/&gt;&lt;!--            æ•°æ®æºæ¨¡å¼ POOLED                dataSourceçš„ç±»å‹å¯ä»¥é…ç½®æˆå…¶å†…ç½®ç±»å‹ä¹‹ä¸€ï¼Œå¦‚UNPOOLEDã€POOLEDã€JNDIã€‚            ã€€ã€€å¦‚æœå°†ç±»å‹è®¾ç½®æˆUNPOOLEDï¼Œmybatiesä¼šä¸ºæ¯ä¸€ä¸ªæ•°æ®åº“æ“ä½œåˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œå¹¶å…³é—­å®ƒã€‚            è¯¥æ–¹å¼é€‚ç”¨äºåªæœ‰å°è§„æ¨¡æ•°é‡å¹¶å‘ç”¨æˆ·çš„ç®€å•åº”ç”¨ç¨‹åºä¸Šã€‚            ã€€ã€€å¦‚æœå°†å±æ€§è®¾ç½®æˆPOOLEDï¼Œmybatiesä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œ            è¿æ¥æ± çš„ä¸€ä¸ªè¿æ¥å°†ä¼šè¢«ç”¨ä½œæ•°æ®åº“æ“ä½œã€‚ä¸€æ—¦æ•°æ®åº“æ“ä½œå®Œæˆï¼Œmybatiesä¼šå°†æ­¤è¿æ¥è¿”å›ç»™è¿æ¥æ± ã€‚            åœ¨å¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒä¸­ç»å¸¸ç”¨åˆ°æ­¤æ–¹å¼ã€‚            ã€€ã€€å¦‚æœå°†ç±»å‹è®¾ç½®æˆJNDIã€‚mybatiesä¼šä»åœ¨åº”ç”¨æœåŠ¡å™¨å‘é…ç½®å¥½çš„JNDIæ•°æ®æºDataSourceè·å–æ•°æ®åº“è¿æ¥ã€‚            åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¼˜å…ˆè€ƒè™‘è¿™ç§æ–¹å¼ã€‚--&gt;            &lt;dataSource type=&quot;POOLED&quot;&gt;                &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;                &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt;                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;                &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;            &lt;/dataSource&gt;        &lt;/environment&gt;        &lt;environment id=&quot;development2&quot;&gt;            &lt;transactionManager type=&quot;JDBC&quot;/&gt;&lt;!--            æ•°æ®æºæ¨¡å¼ POOLED                dataSourceçš„ç±»å‹å¯ä»¥é…ç½®æˆå…¶å†…ç½®ç±»å‹ä¹‹ä¸€ï¼Œå¦‚UNPOOLEDã€POOLEDã€JNDIã€‚            ã€€ã€€å¦‚æœå°†ç±»å‹è®¾ç½®æˆUNPOOLEDï¼Œmybatiesä¼šä¸ºæ¯ä¸€ä¸ªæ•°æ®åº“æ“ä½œåˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œå¹¶å…³é—­å®ƒã€‚            è¯¥æ–¹å¼é€‚ç”¨äºåªæœ‰å°è§„æ¨¡æ•°é‡å¹¶å‘ç”¨æˆ·çš„ç®€å•åº”ç”¨ç¨‹åºä¸Šã€‚            ã€€ã€€å¦‚æœå°†å±æ€§è®¾ç½®æˆPOOLEDï¼Œmybatiesä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œè¿æ¥æ± çš„ä¸€ä¸ªè¿æ¥å°†ä¼šè¢«ç”¨ä½œæ•°æ®åº“æ“ä½œã€‚            ä¸€æ—¦æ•°æ®åº“æ“ä½œå®Œæˆï¼Œmybatiesä¼šå°†æ­¤è¿æ¥è¿”å›ç»™è¿æ¥æ± ã€‚åœ¨å¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒä¸­ç»å¸¸ç”¨åˆ°æ­¤æ–¹å¼ã€‚            ã€€ã€€å¦‚æœå°†ç±»å‹è®¾ç½®æˆJNDIã€‚mybatiesä¼šä»åœ¨åº”ç”¨æœåŠ¡å™¨å‘é…ç½®å¥½çš„JNDIæ•°æ®æºDataSourceè·å–æ•°æ®åº“è¿æ¥ã€‚            åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¼˜å…ˆè€ƒè™‘è¿™ç§æ–¹å¼ã€‚--&gt;            &lt;dataSource type=&quot;POOLED&quot;&gt;                &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;                &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt;                &lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt;                &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt;            &lt;/dataSource&gt;        &lt;/environment&gt;    &lt;/environments&gt;    &lt;databaseIdProvider type=&quot;DB_VENDOR&quot;&gt;        &lt;property name=&quot;SQL Server&quot; value=&quot;sqlserver&quot;/&gt;        &lt;property name=&quot;MySQL&quot; value=&quot;mysql&quot;/&gt;        &lt;property name=&quot;Oracle&quot; value=&quot;oracle&quot; /&gt;    &lt;/databaseIdProvider&gt;&lt;!--    ç¬¬ä¸€ç±»æ˜¯ä½¿ç”¨packageè‡ªåŠ¨æœç´¢çš„æ¨¡å¼ï¼Œè¿™æ ·æŒ‡å®špackageä¸‹æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«æ³¨å†Œä¸ºmapperï¼Œ--&gt;&lt;!--    &lt;mappers&gt;--&gt;&lt;!--        &lt;mapper resource=&quot;mapper\UserMapper.xml&quot;/&gt;--&gt;&lt;!--        &lt;mapper resource=&quot;mapper\FileMapper.xml&quot;/&gt;--&gt;&lt;!--    &lt;/mappers&gt;--&gt;    &lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;    &lt;mappers&gt;        &lt;package name=&quot;org.mybatis.internal.example.mapper&quot;/&gt;    &lt;/mappers&gt;&lt;!--   å¦å¤–ä¸€ç±»æ˜¯æ˜ç¡®æŒ‡å®šmapperï¼Œè¿™åˆå¯ä»¥é€šè¿‡resourceã€urlæˆ–è€…classè¿›è¡Œç»†åˆ†ã€‚ä¾‹å¦‚ï¼š--&gt;&lt;!--    &lt;mappers&gt;--&gt;&lt;!--        &lt;mapper resource=&quot;org/mybatis/builder/AuthorMapper.xml&quot;/&gt;--&gt;&lt;!--        &lt;mapper class=&quot;org.mybatis.builder.AuthorMapper&quot;/&gt;--&gt;&lt;!--        &lt;mapper url=&quot;file:///var/mappers/PostMapper.xml&quot;/&gt;--&gt;&lt;!--    &lt;/mappers&gt;--&gt;&lt;/configuration&gt;</code></pre><h5 id="ç°åœ¨åˆ›å»ºmainæ–¹æ³•ç»§ç»­æµ‹è¯•"><a href="#ç°åœ¨åˆ›å»ºmainæ–¹æ³•ç»§ç»­æµ‹è¯•" class="headerlink" title="ç°åœ¨åˆ›å»ºmainæ–¹æ³•ç»§ç»­æµ‹è¯•"></a>ç°åœ¨åˆ›å»ºmainæ–¹æ³•ç»§ç»­æµ‹è¯•</h5><pre><code class="java">public class MybatisHelloWorld &#123;    // é…ç½®é˜¶æ®µ        // å¾—åˆ°mybatis é…ç½®ç±»çš„æ–‡ä»¶è·¯å¾„        String resource = &quot;mybatis/Configuration.xml&quot;;        Reader reader = null;        SqlSession session = null;        try&#123;            Yaml yml = new Yaml();            LinkedHashMap map = yml.loadAs(MybatisHelloWorld.class                                .getClassLoader()                                .getResourceAsStream(&quot;config.yml&quot;), LinkedHashMap.class);            System.out.println(map);            Map dataSourceMap = (Map)map.get(&quot;dataSource&quot;);            System.out.println(dataSourceMap.get(&quot;username&quot;));            // é€šè¿‡Resources.getResourceAsReader å¾—åˆ°é…ç½®æ–‡ä»¶çš„å­—èŠ‚æµ            reader = Resources.getResourceAsReader(resource);            // è¿™é‡Œçš„Properties å’Œé…ç½®æ–‡ä»¶Configuration.xml é‡Œé¢çš„ä¸€è‡´ï¼Œä½¿ç”¨Javaé…ç½®å¯ä»¥å®ç°åŠ¨æ€çš„properties            Properties properties = new Properties();//            properties.setProperty(&quot;username&quot;, dataSourceMap.get(&quot;username&quot;) + &quot;&quot;);            SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(reader,properties);            // æ‰§è¡ŒSQLé˜¶æ®µ            // å¾—åˆ°ä¸€ä¸ªsessionè¿æ¥            session = sqlSessionFactory.openSession();            FileMapper fileMaper = session.getMapper(FileMapper.class);            List&lt;File&gt; fileList = fileMaper.selectList();            list.forEach(System.out::println);        &#125;catch (Exception e)&#123;            e.printStackTrace();        &#125;finally &#123;            session.commit();            session.close();        &#125;       &#125;</code></pre><h3 id="æºç åˆ†æé˜¶æ®µ"><a href="#æºç åˆ†æé˜¶æ®µ" class="headerlink" title="æºç åˆ†æé˜¶æ®µ"></a>æºç åˆ†æé˜¶æ®µ</h3><p>è¿™æ®µä»£ç ä¸­æ ¸å¿ƒçš„ä»£ç åªæœ‰å››å¥ä»£ç ï¼Œè¿™å››å¥æˆ‘æŠŠæ•´ä¸ªmybatis ä»é…ç½®åˆ°æ‰§è¡Œsqlè¯­å¥å¾—åˆ°æƒ³è¦çš„ç»“æœ åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li> <code>é…ç½®é˜¶æ®µ</code> </li><li><code>æ‰§è¡Œé˜¶æ®µ</code></li></ul><pre><code class="java">// é…ç½®é˜¶æ®µ// åˆ›å»ºsqlsessionå·¥å‚SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(reader,properties);// å¾—åˆ°ä¸€ä¸ªsessionè¿æ¥session = sqlSessionFactory.openSession();// æ‰§è¡Œé˜¶æ®µ// è·å¾—mapperä»£ç†ç±»FileMapper fileMaper = session.getMapper(FileMapper.class);// æ‰§è¡ŒæŸ¥è¯¢æ–¹æ³•List&lt;File&gt; fileList = fileMaper.selectList();</code></pre><p>æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªçš„åˆ†ææ¯ä¸ªé˜¶æ®µçš„æºç ï¼Œé¦–å…ˆæ˜¯<code>é…ç½®é˜¶æ®µ</code>,è¿™ä¸ªé˜¶æ®µæˆ‘ä»¬é¦–å…ˆè¦æå‡ºé—®é¢˜ã€‚</p><ul><li>SqlSessionFactoryå¾—åˆ°buildéœ€è¦å°†xmlé…ç½®æ–‡ä»¶ï¼Œä»–æ‹¿åˆ°è¿™é…ç½®æ–‡ä»¶åšäº†ä»€ä¹ˆï¼Ÿæ€ä¹ˆåšçš„ï¼Ÿ</li></ul><pre><code class="java">// åˆ›å»ºsqlsessionå·¥å‚SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(reader,properties);// å¾—åˆ°ä¸€ä¸ªsessionè¿æ¥session = sqlSessionFactory.openSession();</code></pre><p>æˆ‘ä»¬ç‚¹å‡» build(reader,properties) æ–¹æ³•é‡Œé¢çœ‹ä¸€çœ‹ä»–åˆ°åº•åšäº†ä»€ä¹ˆï¼Œç‚¹å‡»å»æˆ‘ä»¬å‘ç°ä»–æœ€ç»ˆè°ƒç”¨äº†è¿™ä¸ªbuildæ–¹æ³•,åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢åˆ›å»ºäº†ä¸€ä¸ªXMLConfigBuilderå¯¹è±¡</p><pre><code class="java">public SqlSessionFactory build(Reader reader, String environment, Properties properties) &#123;    try &#123;//      è§£æé…ç½®æ–‡ä»¶çš„å…³é”®é€»è¾‘éƒ½å§”æ‰˜ç»™XMLConfigBuilder      XMLConfigBuilder parser = new XMLConfigBuilder(reader, environment, properties);      return build(parser.parse());    &#125; catch (Exception e) &#123;      throw ExceptionFactory.wrapException(&quot;Error building SqlSession.&quot;, e);    &#125; finally &#123;      ErrorContext.instance().reset();      try &#123;        reader.close();      &#125; catch (IOException e) &#123;        // Intentionally ignore. Prefer previous error.      &#125;    &#125;  &#125;</code></pre><p>è§£æé…ç½®æ–‡ä»¶çš„å…³é”®é€»è¾‘éƒ½å§”æ‰˜ç»™XMLConfigBuilderï¼Œæˆ‘ä»¬è¿›å…¥è¿™ä¸ªç±»ä¸€æ¢ç©¶ç«Ÿã€‚è¿™ä¸ªç±»ä¸­æœ€é‡è¦çš„ä¸‰ä¸ªæ–¹æ³•éƒ½åœ¨è¿™é‡Œ</p><pre><code class="java">  private XMLConfigBuilder(XPathParser parser, String environment, Properties props) &#123;    super(new Configuration());    ErrorContext.instance().resource(&quot;SQL Mapper Configuration&quot;);    this.configuration.setVariables(props);    this.parsed = false;    this.environment = environment;    this.parser = parser;  &#125;  /**   * å¤–éƒ¨è°ƒç”¨æ­¤æ–¹æ³•å¯¹mybatisé…ç½®æ–‡ä»¶è¿›è¡Œè§£æ   * ç¬¬å››æ­¥ çœŸæ­£Configurationæ„å»ºé€»è¾‘å°±åœ¨XMLConfigBuilder.parse()é‡Œé¢   */  public Configuration parse() &#123;    if (parsed) &#123;      throw new BuilderException(&quot;Each XMLConfigBuilder can only be used once.&quot;);    &#125;    parsed = true;    //mybatisé…ç½®æ–‡ä»¶è§£æçš„ä¸»æµç¨‹    //ä»æ ¹èŠ‚ç‚¹configuration    // è¿”å›æ ¹èŠ‚ç‚¹ parser.evalNode(&quot;/configuration&quot;)    parseConfiguration(parser.evalNode(&quot;/configuration&quot;));    return configuration;  &#125;  //æ­¤æ–¹æ³•å°±æ˜¯è§£æconfigurationèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹  //ç”±æ­¤ä¹Ÿå¯çœ‹å‡ºï¼Œæˆ‘ä»¬åœ¨configurationä¸‹é¢èƒ½é…ç½®çš„èŠ‚ç‚¹ä¸ºä»¥ä¸‹11ä¸ªèŠ‚ç‚¹  private void parseConfiguration(XNode root) &#123;    try &#123;      // issue #117 read properties first      // è¿™é‡Œæ˜¯æŒ‰ç…§å®˜ç½‘çš„é…ç½®æ–‡ä»¶é¡ºåºè¿›è¡Œè§£æçš„ https://mybatis.org/mybatis-3/zh/configuration.html      propertiesElement(root.evalNode(&quot;properties&quot;));      Properties settings = settingsAsProperties(root.evalNode(&quot;settings&quot;));      loadCustomVfs(settings);      loadCustomLogImpl(settings);      typeAliasesElement(root.evalNode(&quot;typeAliases&quot;));      pluginElement(root.evalNode(&quot;plugins&quot;));      objectFactoryElement(root.evalNode(&quot;objectFactory&quot;));      objectWrapperFactoryElement(root.evalNode(&quot;objectWrapperFactory&quot;));      reflectorFactoryElement(root.evalNode(&quot;reflectorFactory&quot;));      settingsElement(settings);      // read it after objectFactory and objectWrapperFactory issue #631      environmentsElement(root.evalNode(&quot;environments&quot;));      databaseIdProviderElement(root.evalNode(&quot;databaseIdProvider&quot;));      typeHandlerElement(root.evalNode(&quot;typeHandlers&quot;));      mapperElement(root.evalNode(&quot;mappers&quot;));    &#125; catch (Exception e) &#123;      throw new BuilderException(&quot;Error parsing SQL Mapper Configuration. Cause: &quot; + e, e);    &#125;  &#125;</code></pre><p>æˆ‘ä»¬å‘ç°åœ¨parseConfigurationï¼ˆï¼‰æ–¹æ³•ä¸­å¯¹xmlé…ç½®æ–‡ä»¶è¿›è¡Œäº†è§£æï¼Œæ­¤æ–¹æ³•å°±æ˜¯è§£æconfigurationèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹ï¼Œè§£æçš„é¡ºåºæ˜¯æŒ‰ç…§é…ç½®æ–‡ä»¶çš„é…ç½®é¡ºåºä¾æ¬¡è¿›è¡Œçš„è§£æã€‚å…¶ä¸­æœ€é‡è¦å¾—åˆ°<mappers>çš„è§£æï¼Œè¿™é‡Œå°±æ˜¯å¯¹mapperçš„è§£æå¤„ç†ï¼Œæˆ‘ä»¬è¿›å»æ–¹æ³•mapperElementçœ‹ä¸€çœ‹æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p><pre><code class="java">/** *  åŠ è½½mapperæ–‡ä»¶mapperElement * ã€€mapperæ–‡ä»¶æ˜¯mybatisæ¡†æ¶çš„æ ¸å¿ƒä¹‹å¤„ï¼Œæ‰€æœ‰çš„ç”¨æˆ·sqlè¯­å¥éƒ½ç¼–å†™åœ¨mapperæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥ç†è§£mapperæ–‡ä»¶å¯¹äºæ‰€æœ‰çš„å¼€å‘äººå‘˜æ¥è¯´éƒ½æ˜¯å¿…å¤‡çš„è¦æ±‚ * @param parent * @throws Exception */private void mapperElement(XNode parent) throws Exception &#123;  if (parent != null) &#123;    for (XNode child : parent.getChildren()) &#123;      // å¦‚æœè¦åŒæ—¶ä½¿ç”¨packageè‡ªåŠ¨æ‰«æå’Œé€šè¿‡mapperæ˜ç¡®æŒ‡å®šè¦åŠ è½½çš„mapperï¼Œä¸€å®šè¦ç¡®ä¿packageè‡ªåŠ¨æ‰«æçš„èŒƒå›´ä¸åŒ…å«æ˜ç¡®æŒ‡å®šçš„mapperï¼Œ      // å¦åˆ™åœ¨é€šè¿‡packageæ‰«æçš„interfaceçš„æ—¶å€™ï¼Œå°è¯•åŠ è½½å¯¹åº”xmlæ–‡ä»¶çš„loadXmlResource()çš„é€»è¾‘ä¸­å‡ºç°åˆ¤é‡å‡ºé”™ï¼ŒæŠ¥org.apache.ibatis.binding.BindingExceptionå¼‚å¸¸ï¼Œ      // å³ä½¿xmlæ–‡ä»¶ä¸­åŒ…å«çš„å†…å®¹å’Œmapperæ¥å£ä¸­åŒ…å«çš„è¯­å¥ä¸é‡å¤ä¹Ÿä¼šå‡ºé”™ï¼ŒåŒ…æ‹¬åŠ è½½mapperæ¥å£æ—¶è‡ªåŠ¨åŠ è½½çš„xml mapperä¹Ÿä¸€æ ·ä¼šå‡ºé”™ã€‚      if (&quot;package&quot;.equals(child.getName())) &#123;        //  &lt;package name=&quot;org.mybatis.internal.example.mapper&quot;/&gt;        String mapperPackage = child.getStringAttribute(&quot;name&quot;);        configuration.addMappers(mapperPackage);      &#125; else &#123;        String resource = child.getStringAttribute(&quot;resource&quot;);        String url = child.getStringAttribute(&quot;url&quot;);        String mapperClass = child.getStringAttribute(&quot;class&quot;);        if (resource != null &amp;&amp; url == null &amp;&amp; mapperClass == null) &#123;          //  &lt;mapper resource=&quot;org/mybatis/builder/AuthorMapper.xml&quot;/&gt;          ErrorContext.instance().resource(resource);          try(InputStream inputStream = Resources.getResourceAsStream(resource)) &#123;            XMLMapperBuilder mapperParser = new XMLMapperBuilder(inputStream, configuration, resource, configuration.getSqlFragments());            // mapperParser.parse()æ–¹æ³•å°±æ˜¯XMLMapperBuilderå¯¹Mapperæ˜ å°„å™¨æ–‡ä»¶è¿›è¡Œè§£æ            mapperParser.parse();          &#125;        &#125; else if (resource == null &amp;&amp; url != null &amp;&amp; mapperClass == null) &#123;          //  &lt;mapper url=&quot;file:///var/mappers/PostMapper.xml&quot;/&gt;          ErrorContext.instance().resource(url);          try(InputStream inputStream = Resources.getUrlAsStream(url))&#123;            // è§£ææ˜ å°„é…ç½®æ–‡ä»¶            XMLMapperBuilder mapperParser = new XMLMapperBuilder(inputStream, configuration, url, configuration.getSqlFragments());            mapperParser.parse();          &#125;        &#125; else if (resource == null &amp;&amp; url == null &amp;&amp; mapperClass != null) &#123;          //  &lt;mapper class=&quot;org.mybatis.builder.AuthorMapper&quot;/&gt;          // åå°„åŠ è½½å¯¹è±¡          Class&lt;?&gt; mapperInterface = Resources.classForName(mapperClass);          configuration.addMapper(mapperInterface);        &#125; else &#123;          throw new BuilderException(&quot;A mapper element may only specify a url, resource or class, but not more than one.&quot;);        &#125;      &#125;    &#125;  &#125;&#125;</code></pre><p>è¿™æ®µä»£ç é•¿ä¸€ç‚¹ï¼Œæˆ‘ä»¬æŠŠå®ƒåˆ†ä¸€ä¸‹ç±»,ä»ä»£ç ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä»–æŒ‰ç…§<code>child.getName()</code>çš„ä¸åŒåˆ†åˆ«è¿›è¡Œäº†å¤„ç†</p><p>ä¸€å…±å››ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯mybatis.xmlé…ç½®æ–‡ä»¶å››ç§ä¸åŒæ ‡ç­¾åŠ è½½mapperçš„æ–¹æ³•ã€‚è™½ç„¶åˆ†ä¸ºäº†å››ç§æƒ…å†µä½†æ˜¯ä»–æœ€ç»ˆæ‰§è¡Œçš„ä»£ç æ˜¯ç›¸åŒçš„ï¼Œæˆ‘ä»¬åªçœ‹<code>package</code>åŒ…æ‰«æçš„æ–¹å¼ï¼Œå› ä¸ºè¿™ç§æ–¹å¼ç”¨çš„æ¯”è¾ƒå¤šã€‚</p><pre><code class="xml">/** * &lt;mappers&gt; *     &lt;package name=&quot;org.mybatis.internal.example.mapper&quot;/&gt; * &lt;/mappers&gt; */if (&quot;package&quot;.equals(child.getName())) &#123;  // åŒ…åï¼šorg.mybatis.internal.example.mapper  String mapperPackage = child.getStringAttribute(&quot;name&quot;);  configuration.addMappers(mapperPackage);&#125;/** * &lt;mappers&gt; *     &lt;mapper resource=&quot;org/mybatis/builder/AuthorMapper.xml&quot;/&gt; * &lt;/mappers&gt; */if (resource != null &amp;&amp; url == null &amp;&amp; mapperClass == null) &#123;    ...&#125;/** * &lt;mappers&gt; *     &lt;mapper class=&quot;org.mybatis.builder.AuthorMapper&quot;/&gt; * &lt;/mappers&gt; */if (resource == null &amp;&amp; url == null &amp;&amp; mapperClass != null) &#123;    ...&#125;/** * &lt;mappers&gt; *     &lt;mapper url=&quot;file:///var/mappers/PostMapper.xml&quot;/&gt; * &lt;/mappers&gt; */if (resource == null &amp;&amp; url != null &amp;&amp; mapperClass == null) &#123;    ...&#125;</code></pre><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹åŒ…æ‰«æè¿™ç§æ–¹æ³•åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ</p><p>ç‚¹å‡»è¿™ä¸ªæ–¹æ³• configuration.addMappers(â€œmapperæ¥å£çš„åŒ…åâ€)ï¼Œæˆ‘å°±åº·åº·ä¸ä¹±åŠ¨ï¼(â—Ë‡âˆ€Ë‡â—)</p><p>ç‚¹å‡»configçš„addMappersæ–¹æ³•å‘ç°åˆæ˜¯è€æ ·å­ï¼Œä»–åˆäº¤ç»™äº†åˆ«äººå¤„ç†äº†</p><pre><code class="java">mapperRegistry.addMappers(packageName);</code></pre><p>configæ˜¯è°ƒç”¨äº†mapperRegistryçš„addMappersæ–¹æ³•ï¼Œå¥½å§ï¼æˆ‘è¿›å…¥çš„æ·±ä¸€ç‚¹ï¼Œæˆ‘å†è·Ÿè¿›å»ã€‚</p><pre><code class="java">  public void addMappers(String packageName, Class&lt;?&gt; superType) &#123;    // mybatisæ¡†æ¶æä¾›çš„æœç´¢classpathä¸‹æŒ‡å®špackageä»¥åŠå­packageä¸­ç¬¦åˆæ¡ä»¶(æ³¨è§£æˆ–è€…ç»§æ‰¿äºæŸä¸ªç±»/æ¥å£)çš„ç±»ï¼Œé»˜è®¤ä½¿ç”¨Thread.currentThread().getContextClassLoader()è¿”å›çš„åŠ è½½å™¨,å’Œspringçš„å·¥å…·ç±»æ®Šé€”åŒå½’ã€‚    ResolverUtil&lt;Class&lt;?&gt;&gt; resolverUtil = new ResolverUtil&lt;&gt;();    // æ— æ¡ä»¶çš„åŠ è½½æ‰€æœ‰çš„ç±»,å› ä¸ºè°ƒç”¨æ–¹ä¼ é€’äº†Object.classä½œä¸ºçˆ¶ç±»,è¿™ä¹Ÿç»™ä»¥åçš„æŒ‡å®šmapperæ¥å£é¢„ç•™äº†ä½™åœ°    resolverUtil.find(new ResolverUtil.IsA(superType), packageName);    // æ‰€æœ‰åŒ¹é…çš„calsséƒ½è¢«å­˜å‚¨åœ¨ResolverUtil.matcheså­—æ®µä¸­    Set&lt;Class&lt;? extends Class&lt;?&gt;&gt;&gt; mapperSet = resolverUtil.getClasses();    for (Class&lt;?&gt; mapperClass : mapperSet) &#123;      //è°ƒç”¨addMapperæ–¹æ³•è¿›è¡Œå…·ä½“çš„mapperç±»/æ¥å£è§£æ      addMapper(mapperClass);    &#125;  &#125;</code></pre><p>å½“æˆ‘è¿›å…¥è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å‘ç°ï¼Œå“,è¿™é‡Œçš„ä»£ç å¤šè‚¯å®šæ˜¯è¿™é‡Œæ²¡é”™äº†ã€‚æˆ‘ä»¬çœ‹çœ‹è¿™é‡Œåšäº†ä»€ä¹ˆæ“ä½œã€‚</p><p>é¦–å…ˆå¾—åˆ°äº†ä¸€ä¸ªåŒ…æœç´¢å·¥å…· resolverUtil</p><p>é€šè¿‡è¿™ä¸ªå·¥å…·æ‹¿åˆ°äº†è¿™ä¸ªåŒ…ä¸‹æ‰€æœ‰çš„mapperæ¥å£çš„classå¯¹è±¡mapperSetï¼Œæ˜¯ä¸€ä¸ªseté›†åˆï¼Œç„¶åéå†é›†åˆï¼Œä»–åˆè°ƒç”¨äº† addMappersæ–¹æ³•ï¼Œè¿™æ¬¡ä¼ é€’çš„å‚æ•°æ˜¯æ¯ä¸ªmapperæ¥å£çš„classå¯¹è±¡ã€‚æ²¡åŠæ³•å†è¿›å»çœ‹çœ‹</p><pre><code class="java"> public &lt;T&gt; void addMapper(Class&lt;T&gt; type) &#123;    // å¯¹äºmybatis mapperæ¥å£æ–‡ä»¶ï¼Œå¿…é¡»æ˜¯interfaceï¼Œä¸èƒ½æ˜¯classï¼Œå› ä¸ºmybatisç”¨çš„æ˜¯jdkåŠ¨æ€ä»£ç†    if (type.isInterface()) &#123;      // åˆ¤é‡ï¼Œç¡®ä¿åªä¼šåŠ è½½ä¸€æ¬¡ä¸ä¼šè¢«è¦†ç›–      if (hasMapper(type)) &#123;        throw new BindingException(&quot;Type &quot; + type + &quot; is already known to the MapperRegistry.&quot;);      &#125;      boolean loadCompleted = false;      try &#123;        // ç”Ÿæˆä¸€ä¸ªMapperProxyFactoryï¼Œç”¨äºä¹‹åç”ŸæˆåŠ¨æ€ä»£ç†ç±»        // ä¸ºmapperæ¥å£åˆ›å»ºä¸€ä¸ªMapperProxyFactoryä»£ç†å·¥å‚ï¼Œå°†mapperæ¥å£ä¸å·¥å‚å»ºç«‹å…³ç³»ï¼Œå½“ä½¿ç”¨è¿™ä¸ªmapperçš„ä»£ç†ç±»æ—¶å†å»ç”Ÿäº§ä¸€ä¸ªä»£ç†ç±»        knownMappers.put(type, new MapperProxyFactory&lt;&gt;(type));        // It&#39;s important that the type is added before the parser is run        // otherwise the binding may automatically be attempted by the        // mapper parser. If the type is already known, it won&#39;t try.        // MapperAnnotationBuilderè¿›è¡Œå…·ä½“çš„è§£æ        //ä»¥ä¸‹ä»£ç ç‰‡æ®µç”¨äºè§£ææˆ‘ä»¬å®šä¹‰çš„XxxMapperæ¥å£é‡Œé¢ä½¿ç”¨çš„æ³¨è§£ï¼Œè¿™ä¸»è¦æ˜¯å¤„ç†ä¸ä½¿ç”¨xmlæ˜ å°„æ–‡ä»¶çš„æƒ…å†µ        MapperAnnotationBuilder parser = new MapperAnnotationBuilder(config, type);        parser.parse();        loadCompleted = true;      &#125; finally &#123;        if (!loadCompleted) &#123;          //å‰”é™¤è§£æå‡ºç°å¼‚å¸¸çš„æ¥å£          knownMappers.remove(type);        &#125;      &#125;    &#125;  &#125;</code></pre><p>è¿™ç‰‡ä»£ç å†™äº†å•¥ï¼Œä¸€å †çš„åˆ¤æ–­â€¦.. å—¯å°±ä¸€ä¸¤å¥æˆ‘ä»¬æƒ³çœ‹åˆ°çš„</p><pre><code class="java">knownMappers.put(type, new MapperProxyFactory&lt;&gt;(type));MapperAnnotationBuilder parser = new MapperAnnotationBuilder(config, type);        parser.parse();</code></pre><p>ç¬¬ä¸€ä¸ª è®©æˆ‘ä»¬ç»ˆäºçŸ¥é“äº†ï¼Œæˆ‘ä»¬é‚£äº›mapperæ¥å£åˆ°åº•å»å“ªé‡Œäº†ï¼ŒåŸæ¥åœ¨è¿™ä¸ªä»–ä¸ºæ¯ä¸ªmapperæ¥å£åˆ›å»ºäº†ä¸€ä¸€å¯¹åº”çš„MapperProxyFactoryä»£ç†å·¥å‚ï¼Œå¹¶å°†è¿™äº›å·¥å‚å­˜æ”¾åˆ°äº† mapå¯¹è±¡ä¸­ã€‚</p><ul><li><p>key: mapperClass</p></li><li><p>valueï¼šMapperProxyFactory&lt;&gt;(mapperClass)</p></li></ul><p>ç¬¬äºŒä¸ª ç”¨äºè§£ææˆ‘ä»¬å®šä¹‰çš„XxxMapperæ¥å£é‡Œé¢ä½¿ç”¨çš„æ³¨è§£ï¼Œè¿™ä¸»è¦æ˜¯å¤„ç†ä¸ä½¿ç”¨xmlæ˜ å°„æ–‡ä»¶çš„æƒ…å†µã€‚è¿™é‡Œä¸åœ¨æ·±å…¥ï¼Œè°æƒ³çœ‹è‡ªå·±å»çœ‹ã€‚</p><p>æœ€åè¿˜æ‰§è¡Œäº†ä¸€å¥è§£æ <code>parser.parse()</code>ï¼Œè¿™ä¸ªè§£æåˆ°åº•åœ¨è§£æä»€ä¹ˆï¼Œæˆ‘ä»¬åœ¨~~~~ç‚¹å‡»å»çœ‹ä¸€ä¸‹ã€‚</p><p>è¿™é‡Œä¸œè¥¿æœ‰ç‚¹å¤šï¼Œçœ‹ä¸€ä¸‹çš„æˆ‘çš„æºç ç‰‡æ®µï¼Œè¿™é‡Œæˆ‘éƒ½è¿›è¡Œäº†æ³¨é‡Šã€‚</p><pre><code class="java"> /**   * MapperBuilderAssistantåˆå§‹åŒ–å®Œæˆä¹‹åï¼Œå°±è°ƒç”¨build.parse()è¿›è¡Œå…·ä½“çš„mapperæ¥å£æ–‡ä»¶åŠ è½½ä¸è§£æ   */  public void parse() &#123;    String resource = type.toString();    //é¦–å…ˆæ ¹æ®mapperæ¥å£çš„å­—ç¬¦ä¸²è¡¨ç¤ºåˆ¤æ–­æ˜¯å¦å·²ç»åŠ è½½,é¿å…é‡å¤åŠ è½½,æ­£å¸¸æƒ…å†µä¸‹åº”è¯¥éƒ½æ²¡æœ‰åŠ è½½    if (!configuration.isResourceLoaded(resource)) &#123;      //â­â­â­â­â­ åŠ è½½Mapper.xmlèµ„æºï¼Œè¿™é‡Œé¢å°±æ˜¯è§£æmapper.xmlçš„æ–¹æ³•      loadXmlResource();      configuration.addLoadedResource(resource);      // å‘½åç©ºé—´ æ¯ä¸ªmapperæ–‡ä»¶è‡ªæˆä¸€ä¸ªnamespaceï¼Œé€šå¸¸è‡ªåŠ¨åŒ¹é…å°±æ˜¯è¿™ä¹ˆæ¥çš„ï¼Œçº¦å®šä¿—æˆä»£æ›¿äººå·¥è®¾ç½®æœ€ç®€åŒ–å¸¸è§çš„å¼€å‘      assistant.setCurrentNamespace(type.getName());      parseCache();      parseCacheRef();      for (Method method : type.getMethods()) &#123;        if (!canHaveStatement(method)) &#123;          continue;        &#125;        if (getAnnotationWrapper(method, false, Select.class, SelectProvider.class).isPresent()            &amp;&amp; method.getAnnotation(ResultMap.class) == null) &#123;          parseResultMap(method);        &#125;        try &#123;          parseStatement(method);        &#125; catch (IncompleteElementException e) &#123;          configuration.addIncompleteMethod(new MethodResolver(this, method));        &#125;      &#125;    &#125;    parsePendingMethods();  &#125;</code></pre><p>loadXmlResourceè¿™ä¸ªæ–¹æ³•å°†mapper.xmlè¿›è¡Œäº†è§£æï¼Œå…·ä½“æ€ä¹ˆè§£æè‡ªå·±çœ‹ã€‚</p><pre><code class="java"> private void loadXmlResource() &#123;    // åˆ¤æ–­èµ„æºæ˜¯å¦å·²ç»åŠ è½½è¿‡    if (!configuration.isResourceLoaded(&quot;namespace:&quot; + type.getName())) &#123;      // å¾—åˆ°xmlçš„ç›¸å¯¹è·¯å¾„ ä¾‹å¦‚ï¼šcom.xx.mapper.UserMapper.xml æ³¨æ„è¿™æ˜¯æŒ‡åœ¨resources é—®ä»·å¤¹ä¸‹çš„èµ„æºç›®å½•      // typeå€¼å¾—æ˜¯mapperæ¥å£æ–‡ä»¶çš„ä¿¡æ¯      // type.getName() = com.xx.mapper.UserMapper      // ä»–ä¼šè§£ææˆ com/xx/mapper/UserMapper.xml      String xmlResource = type.getName().replace(&#39;.&#39;, &#39;/&#39;) + &quot;.xml&quot;;      // åŠ è½½xml çš„æ–‡ä»¶æµ      InputStream inputStream = type.getResourceAsStream(&quot;/&quot; + xmlResource);      if (inputStream == null) &#123;        try &#123;          // ClassLoader.getSystemClassLoader(); é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½          inputStream = Resources.getResourceAsStream(type.getClassLoader(), xmlResource);        &#125; catch (IOException e2) &#123;        &#125;      &#125;      if (inputStream != null) &#123;        // è°ƒç”¨XMLMapperBuilder è§£æmapper.xmlæ–‡ä»¶        XMLMapperBuilder xmlParser = new XMLMapperBuilder(inputStream, assistant.getConfiguration(), xmlResource, configuration.getSqlFragments(), type.getName());        xmlParser.parse();      &#125;    &#125;  &#125;</code></pre><p>åˆ°ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†mybatisé…ç½®é˜¶æ®µåˆ°åº•æ‰§è¡Œäº†é‚£ä¸œè¥¿ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯sqlæ‰§è¡Œé˜¶æ®µäº†ï¼Œæ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”å¬ä¸‹æ¬¡è®²è§£</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;mybatisæºç åˆ†æ-mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ&quot;&gt;&lt;a href=&quot;#mybatisæºç åˆ†æ-mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;mybatisæºç åˆ†æ-mybatisé…ç½®é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†æ&quot;&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://bigfish777.github.io/stars.github.io/2021/05/19/hello-world/"/>
    <id>https://bigfish777.github.io/stars.github.io/2021/05/19/hello-world/</id>
    <published>2021-05-19T08:02:58.892Z</published>
    <updated>2021-05-19T08:02:58.892Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
